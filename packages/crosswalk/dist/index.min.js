var crosswalk=function(e,t,a,l,n){"use strict";const r=t.gen3Api.injectEndpoints({endpoints:e=>({getCrosswalkData:e.query({query:e=>({url:`metadata?${e.ids}`}),transformResponse:(e,t,a)=>({mapping:Object.values(e).map((e=>({from:e.ids[a.fields.from],to:e.ids[a.fields.to]})))})})})}),{useGetCrosswalkDataQuery:i}=r,o=({fromTitle:e,toTitle:r,guidField:o,fromField:s,toField:c})=>{const[d,u]=a.useState(""),[m,p]=a.useState(""),{data:E,isSuccess:g}=i({ids:d,fields:{from:s,to:c}},{skip:""===d}),[v,C]=a.useState(""),f=n.useClipboard({timeout:500}),k=t.usePrevious(s);a.useEffect((()=>{g&&C(E.mapping.map((e=>e.to)).join("\n"))}),[E,g]);const h=()=>{p(""),C(""),u("")};a.useEffect((()=>{k!=s&&h()}),[k,s]);return a.createElement(l.Group,{grow:!0,className:"w-100 h-100 p-4 mt-4"},a.createElement(l.Stack,null,a.createElement(l.Group,null,a.createElement(l.Text,null,e),a.createElement(l.Button,{variant:"outline",size:"xs",disabled:0==m.length,onClick:()=>(()=>{const e=m.split(/,|\r?\n|\r|\n/g).map((e=>`ids.${s}=${e}`)).join("&");u(`_guid_type=${o}&data=True&${e}`)})()},"Submit"),a.createElement(l.Button,{variant:"outline",size:"xs",disabled:0==m.length,onClick:()=>h()},"Clear")),a.createElement(l.Textarea,{placeholder:"IDs...",radius:"md",size:"md",required:!0,value:m,minRows:18,onChange:e=>{return t=e.currentTarget.value,void p(t);var t}})),a.createElement(l.Stack,null,a.createElement(l.Group,null,a.createElement(l.Text,null,r),a.createElement(l.Group,{position:"right"},a.createElement(l.Button,{variant:"outline",size:"xs",color:f.copied?"teal":"blue",onClick:()=>{E&&f.copy(E.mapping.map((e=>e.to)))},disabled:0==v.length},"Copy"),a.createElement(l.Button,{variant:"outline",size:"xs",onClick:()=>{E&&(e=>{const t=encodeURI(`data:text/csv;charset=utf-8,${e}`),a=document.createElement("a");a.href=t,a.download="crosswalk_data.csv",document.body.appendChild(a),a.click(),document.body.removeChild(a)})(E.mapping.map((e=>`${e.from},${e.to}`)).join("\n"))},disabled:0==v.length},"Download"))),a.createElement(l.Textarea,{placeholder:"Results...",radius:"md",size:"md",value:v,readOnly:!0,minRows:18})))},s=({converters:e})=>{const t=a.useMemo((()=>Object.entries(e).map((([e,t])=>({label:t.title,value:e,data:t})))),[e]),[n,r]=a.useState(t[0].value),[i,s]=a.useState(Object.values(e)[0]);return a.createElement(l.Stack,null,a.createElement("div",{className:"flex px-4"},a.createElement(l.Select,{label:"Select Converter",placeholder:"Pick one",data:t,value:n,onChange:t=>{r(t),s(e[t])}})),a.createElement(o,i))},c={N3C:{title:"MIDRC to N3C",guidField:"n3c_crosswalk",fromTitle:"Enter your MIDRC Ids",toTitle:"Matching N3C IDs",fromField:"midrc_id",toField:"n3c_id"},Petal:{title:"BDCat to MIDRC",guidField:"petal_crosswalk",fromTitle:"Enter your BDCat Ids",toTitle:"Matching MIDRC IDs",fromField:"bdcat_id",toField:"midrc_id"}},d=()=>React.createElement(s,{converters:c});return e.registerApp=()=>{t.createGen3App({App:d,name:"crosswalk",version:"0.0.1",requiredEntityTypes:[]})},e}({},gen3Core,React,mantine,mantineHooks);
